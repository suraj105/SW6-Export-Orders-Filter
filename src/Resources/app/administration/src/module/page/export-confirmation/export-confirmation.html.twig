<sw-page class="export-confirmation-page">
    <template #smart-bar-header>
        <h2>Export Confirmation</h2>
    </template>

    <template #content>
        <sw-card-view>

            <sw-card title="Export Orders" large>

                <div class="order-selection">
                    <label for="orderDropdown">Select Order:</label>
                    <select id="orderDropdown" v-model="selectedOrderNumber" @change="filterOrders">
                        <option v-for="order in orderOptions" :key="order.orderNumber" :value="order.orderNumber" :disabled="order.placeholder">
                            {{ order.placeholder ? order.label : order.orderNumber + ' - ' + order.orderDateTime }}
                        </option>
                    </select>
                </div>

                <div class="export-file-section">
                    <h3>Your File</h3>
                    <sw-button variant="primary" @click="downloadCsv">
                        Download CSV
                    </sw-button>
                </div>

                <div class="export-content-section">
                    <h3>Content</h3>
                    <sw-card class="csv-content-preview">
                        <pre v-if="filteredOrders.length">{{ csvPreview }}</pre>
                        <p v-else>No orders available for export.</p>
                    </sw-card>
                </div>
            </sw-card>
        </sw-card-view>
    </template>
</sw-page>
